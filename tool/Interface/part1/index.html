<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组课工具 | 课件API文档</title>
    <meta name="description" content="课件相关技术规范">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.c40cf795.css" as="style"><link rel="preload" href="/docs/assets/js/app.d5fef9c8.js" as="script"><link rel="preload" href="/docs/assets/js/41.5c9037b9.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.26aff07a.js"><link rel="prefetch" href="/docs/assets/js/11.356c0423.js"><link rel="prefetch" href="/docs/assets/js/12.4b0b7534.js"><link rel="prefetch" href="/docs/assets/js/13.b3d0ac13.js"><link rel="prefetch" href="/docs/assets/js/14.7d717fc7.js"><link rel="prefetch" href="/docs/assets/js/15.81fdacc2.js"><link rel="prefetch" href="/docs/assets/js/16.c9b593f0.js"><link rel="prefetch" href="/docs/assets/js/17.52329758.js"><link rel="prefetch" href="/docs/assets/js/18.73934e12.js"><link rel="prefetch" href="/docs/assets/js/19.0731488b.js"><link rel="prefetch" href="/docs/assets/js/2.3289b343.js"><link rel="prefetch" href="/docs/assets/js/20.5533abc2.js"><link rel="prefetch" href="/docs/assets/js/21.ff2fced4.js"><link rel="prefetch" href="/docs/assets/js/22.9afaea5b.js"><link rel="prefetch" href="/docs/assets/js/23.b509a985.js"><link rel="prefetch" href="/docs/assets/js/24.b6ff7eb5.js"><link rel="prefetch" href="/docs/assets/js/25.3a3e8628.js"><link rel="prefetch" href="/docs/assets/js/26.3f43b41e.js"><link rel="prefetch" href="/docs/assets/js/27.ef4f03b7.js"><link rel="prefetch" href="/docs/assets/js/28.e1ebca65.js"><link rel="prefetch" href="/docs/assets/js/29.25753259.js"><link rel="prefetch" href="/docs/assets/js/3.94839a93.js"><link rel="prefetch" href="/docs/assets/js/30.d835b57d.js"><link rel="prefetch" href="/docs/assets/js/31.ad575a2a.js"><link rel="prefetch" href="/docs/assets/js/32.7b84b59e.js"><link rel="prefetch" href="/docs/assets/js/33.ebafbe50.js"><link rel="prefetch" href="/docs/assets/js/34.1240781b.js"><link rel="prefetch" href="/docs/assets/js/35.b76a6792.js"><link rel="prefetch" href="/docs/assets/js/36.b9d1cef5.js"><link rel="prefetch" href="/docs/assets/js/37.38a8ca2e.js"><link rel="prefetch" href="/docs/assets/js/38.9322a16c.js"><link rel="prefetch" href="/docs/assets/js/39.092b45d0.js"><link rel="prefetch" href="/docs/assets/js/4.67480b38.js"><link rel="prefetch" href="/docs/assets/js/40.d505faae.js"><link rel="prefetch" href="/docs/assets/js/42.fa3c0dfe.js"><link rel="prefetch" href="/docs/assets/js/43.d2fb3ae2.js"><link rel="prefetch" href="/docs/assets/js/44.4756439a.js"><link rel="prefetch" href="/docs/assets/js/45.707a2bb8.js"><link rel="prefetch" href="/docs/assets/js/46.e25214bb.js"><link rel="prefetch" href="/docs/assets/js/47.0374e038.js"><link rel="prefetch" href="/docs/assets/js/48.5252e233.js"><link rel="prefetch" href="/docs/assets/js/49.60e0a5a4.js"><link rel="prefetch" href="/docs/assets/js/5.327ea335.js"><link rel="prefetch" href="/docs/assets/js/50.86edcb70.js"><link rel="prefetch" href="/docs/assets/js/51.5e3e022b.js"><link rel="prefetch" href="/docs/assets/js/52.b7736e33.js"><link rel="prefetch" href="/docs/assets/js/53.99b6dfbd.js"><link rel="prefetch" href="/docs/assets/js/54.db8bcc76.js"><link rel="prefetch" href="/docs/assets/js/55.e60c935f.js"><link rel="prefetch" href="/docs/assets/js/56.3fe90c99.js"><link rel="prefetch" href="/docs/assets/js/57.1e1480f3.js"><link rel="prefetch" href="/docs/assets/js/6.e1c2907a.js"><link rel="prefetch" href="/docs/assets/js/7.675ab493.js"><link rel="prefetch" href="/docs/assets/js/8.32db004d.js"><link rel="prefetch" href="/docs/assets/js/9.f9c8d8ce.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.c40cf795.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">课件API文档</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/tool/develop/part1/" class="nav-link">组课工具API</a></div><div class="nav-item"><a href="/docs/editor/part1/" class="nav-link">编辑器API</a></div><div class="nav-item"><a href="/docs/package/BigMath/Observable/" class="nav-link">组件包API</a></div><div class="nav-item"><a href="/docs/git/part1/" class="nav-link">Git规范</a></div><div class="nav-item"><a href="/docs/log/part1/" class="nav-link">日志查询</a></div><div class="nav-item"><a href="/docs/test/part1/" class="nav-link">建课教程</a></div><div class="nav-item"><a href="/docs/lib/part1/" class="nav-link">资料库</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/tool/develop/part1/" class="nav-link">组课工具API</a></div><div class="nav-item"><a href="/docs/editor/part1/" class="nav-link">编辑器API</a></div><div class="nav-item"><a href="/docs/package/BigMath/Observable/" class="nav-link">组件包API</a></div><div class="nav-item"><a href="/docs/git/part1/" class="nav-link">Git规范</a></div><div class="nav-item"><a href="/docs/log/part1/" class="nav-link">日志查询</a></div><div class="nav-item"><a href="/docs/test/part1/" class="nav-link">建课教程</a></div><div class="nav-item"><a href="/docs/lib/part1/" class="nav-link">资料库</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>项目构建流程</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>接口API</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/docs/tool/Interface/part1/" class="active sidebar-link">组课工具</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/tool/Interface/part2/" class="sidebar-link">接口SDK</a></li><li><a href="/docs/tool/Interface/part3/" class="sidebar-link">动效库</a></li><li><a href="/docs/tool/Interface/part4/" class="sidebar-link">日志</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h3 id="下载地址"><a href="#下载地址" aria-hidden="true" class="header-anchor">#</a> 下载地址</h3> <p><a href="http://icourse.xesimg.com/Tool/zukegongju-mac.zip">mac</a> <a href="http://icourse.xesimg.com/Tool/zukegongju-window.zip">window</a></p> <h3 id="数据包"><a href="#数据包" aria-hidden="true" class="header-anchor">#</a> 数据包</h3> <p><code>安装</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm i xtemplate-editor --save
</code></pre></div><h3 id="项目引入"><a href="#项目引入" aria-hidden="true" class="header-anchor">#</a> 项目引入</h3> <div class="language- extra-class"><pre class="language-text"><code>import {xesAnimate} from 'xtemplate-editor'
</code></pre></div><h3 id="组课工具项目结构"><a href="#组课工具项目结构" aria-hidden="true" class="header-anchor">#</a> 组课工具项目结构</h3> <hr> <h4 id="目录结构"><a href="#目录结构" aria-hidden="true" class="header-anchor">#</a> 目录结构</h4> <div class="language- extra-class"><pre class="language-text"><code>|-- common
|   `-- loader.js                       //公共部分
|-- lib                                 //导出目录
|   |-- Animate                         //动画库
|   |   `-- index.js
|   |-- Editor                          //编辑
|   |   |-- game                        //编辑游戏页
|   |   |   `-- index.js
|   |   |-- render                      //渲染
|   |   |   |-- DragElement.js
|   |   |   `-- index.js
|   |   |-- start                       //编辑开始页
|   |   |   `-- index.js    
|   |   `-- subtitle                    //编辑题干部分
|   |       `-- index.js
|   |-- Preview                         //预览
|   |   |-- game                        //预览游戏页
|   |   |   `-- index.js                
|   |   |-- start                       //预览开始页
|   |   |   `-- index.js
|   |   `-- subtitle                    //预览题干部分
|   |       `-- index.js                
|   |-- index.js
|   `-- packages
|       |-- Editor
|       |   `-- index.js
|       `-- Preview
|           `-- index.js
|-- package-lock.json
|-- package.json
|-- README.md                               
|-- src                                  //原始目录
|   |-- Animate                          //动画库   
|   |   |-- index.js
|   |   `-- readme.md
|   |-- Editor                           //编辑
|   |   |-- game                         //编辑游戏页
|   |   |   `-- index.js
|   |   |-- render                       //渲染
|   |   |   |-- DragElement.js
|   |   |   `-- index.js
|   |   |-- start                        //编辑开始页
|   |   |   `-- index.js
|   |   `-- subtitle                     //编辑题干部分
|   |       `-- index.js
|   |-- Preview                          //预览
|   |   |-- game                         //预览游戏页
|   |   |   `-- index.js
|   |   |-- start                        //预览开始页
|   |   |   `-- index.js
|   |   `-- subtitle                     //预览题干部分
|   |       `-- index.js
|   |-- index.js
|   `-- packages                         //vue预览编辑页面
|       |-- Editor                       //编辑页面
|       |   |-- index.js
|       |   `-- src
|       |       |-- Edit.vue
|       |       |-- EditEnd.vue
|       |       |-- EditGame.vue
|       |       |-- EditGamePublic.vue
|       |       |-- EditPreview.vue
|       |       `-- EditStart.vue
|       `-- Preview                      //预览页面
|           |-- index.js
|           `-- src
|               `-- Preview.vue
</code></pre></div><h4 id="项目结构说明"><a href="#项目结构说明" aria-hidden="true" class="header-anchor">#</a> 项目结构说明</h4> <div class="language- extra-class"><pre class="language-text"><code>项目的结构正如上边展示的图所示，分析此结构，主要有一下几部分组成。
项目的common目录，lib目录，src目录,common目录存放的正是下边两个目录文件所依赖的一个加载组件包，是下方文件的必须目录文件。
src是整个编辑器的源程序文件lib则是将其编译之后的结果，所以二者的目录结构基本一致，此处只对src目录分析。

-- src                                  //原始目录
|   |-- Animate                          //动画库   
|   |-- Editor                           //编辑
|   |-- Preview                          //预览
|   |-- index.js                         //执行文件
|   |-- packages                         //vue预览编辑页面

src的二级目录为Animate，Editor，packages和Preview以及必要的index.js文件。
1.Animate是我们的动效仓库，完整的动效包，具体的动效类型还有使用方法其对应的README文件都有讲解，
2.Editor和Preview文件夹就是我们编辑器的编辑以及预览两种状态，文件夹中的文件对应的就是这两种状态下相关内容的渲染文件(GAME舞台渲染、开始页渲染、标题文字部分渲染)，
3.剩下的package文件夹则是我们常常编辑的右侧操作区内容，对应的操作都在此处执行
</code></pre></div><h4 id="项目导出方法"><a href="#项目导出方法" aria-hidden="true" class="header-anchor">#</a> 项目导出方法</h4> <div class="language- extra-class"><pre class="language-text"><code>  内容页引入编辑方法
- UploadAndRenderEle        //编辑页面上传资源后执行
- RenderAllData             //渲染所有元素
- RenderElementByIndex      //根据下标渲染内容页
- StemAudioPause            //暂停本页音频

  引入工具方法
- xesEditorDrag             //拖拽方法
- xesAnimate                //动画库
</code></pre></div><h4 id="公用方法详解"><a href="#公用方法详解" aria-hidden="true" class="header-anchor">#</a> 公用方法详解</h4> <h4 id="renderalldata-editstatus-question"><a href="#renderalldata-editstatus-question" aria-hidden="true" class="header-anchor">#</a> RenderAllData( editStatus, question)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 方法说明
 * @method RenderAllData
 * @for Rander
 * @param {Boolean}  editStatus 编辑状态，对应当前舞台的状态变化，编辑的时候调用此方法则应该传入true,否则就是false
 * @param {Object}  question 配置json文件内容，传入的是配置文件内容
 */</span>
<span class="token function">RenderAllData</span><span class="token punctuation">(</span> editStatus <span class="token punctuation">,</span> question<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">*</span> 一般情况来说无需再次调用此方法，只用来生成原始舞台即可
<span class="token operator">*</span> 此方法会将舞台全部清空，然后按配置文件将资源重新生成至舞台之中，此时的渲染会失去私有方法中添加的事件处理需要重新绑定生成
</code></pre></div><h4 id="renderelementbyindex-index-question"><a href="#renderelementbyindex-index-question" aria-hidden="true" class="header-anchor">#</a> RenderElementByIndex( index, question)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 方法说明
 * @method RenderElementByIndex
 * @for Rander
 * @param {Number}  index 需要重新渲染的页面索引
 * @param {Object}  question 配置json文件内容，传入的是配置文件内容
 */</span>
<span class="token function">RenderElementByIndex</span><span class="token punctuation">(</span> index <span class="token punctuation">,</span> question<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">*</span> 此方法同重渲染一致，会丢失原绑定事件请谨慎使用
<span class="token operator">*</span> 将指定索引的舞台内容重渲
</code></pre></div><h4 id="uploadandrenderele-index-question"><a href="#uploadandrenderele-index-question" aria-hidden="true" class="header-anchor">#</a> UploadAndRenderEle( index, question)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 方法说明
 * @method UploadAndRenderEle
 * @for Rander
 * @param {Number}  index 需要渲染到页面的索引
 * @param {String}  componentName 此次上传组件的组件名称
 * @param {Object}  resource 此次上传的资源对象
 * @param {Object}  question 配置json文件内容，传入的是配置文件内容
 */</span>
<span class="token function">UploadAndRenderEle</span><span class="token punctuation">(</span> index<span class="token punctuation">,</span> componentName<span class="token punctuation">,</span> resource<span class="token punctuation">,</span> question<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">*</span> 按指定的索引，将资源文件中的资源（图片、精灵序列或者动画）以传入的组件名称命名渲染到舞台中
<span class="token operator">*</span> 上传的资源会以传入的组件名被命名，对应编辑状态的时候会有编辑组件属性的控制，此时互相关联的唯一凭据就是组件名称，所以组件名称需要保持唯一。
</code></pre></div><h4 id="补充渲染的关键点"><a href="#补充渲染的关键点" aria-hidden="true" class="header-anchor">#</a> 补充渲染的关键点</h4> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>渲染到舞台的资源主要分为其中几类，图片、精灵还有动画，这其中的每一项在舞台中的存在都是凭借组件名
称互相区分识别的，而他们的渲染又是依靠那些属性的呢？</p> <p>图片的渲染：
<b>主要是识别其name中是否存在render字样或者时候存在show属性</b>，资源名称中带有render的图片会被识别按属性渲染到舞台上，
其中的render字样是依靠在uploadImage方法中修改render属性附加的，这个看组课常用方法时会说明。<b>同时
配置中也需要有描述图片的基本属性(width,height)</b>，否则渲染的时候也有可能无法看到</p> <p>精灵的渲染：
主要是素材还有组件的名称是否完备，<b>资源的素材名中是否含有sprite字段并且存在show字段或者是render字样</b>，满足条件的精
灵图文件才会被渲染到舞台上。</p> <p>动画的渲染：
和精灵图的规范一致，渲染之前需要检查资源的素材名中<b>是否含有animate字段并且存在show字段或者是render字样</b></p></div> <h4 id="stemaudiopause-index"><a href="#stemaudiopause-index" aria-hidden="true" class="header-anchor">#</a> StemAudioPause( index)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 方法说明
 * @method StemAudioPause
 * @for Rander
 * @param {Number}  index 暂停音频的页面下标索引
 */</span>
<span class="token function">StemAudioPause</span><span class="token punctuation">(</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">*</span> 此方法会将指定下标的舞台题干音频暂停，不影响其他页面的题干播放
</code></pre></div><h3 id="编辑状态中常用的方法"><a href="#编辑状态中常用的方法" aria-hidden="true" class="header-anchor">#</a> 编辑状态中常用的方法</h3> <h4 id="uploadimage-data-name-ids-e"><a href="#uploadimage-data-name-ids-e" aria-hidden="true" class="header-anchor">#</a> uploadImage( data,name, ids,e)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 方法说明
 * @method uploadImage
 * @for Private
 * @param {Object}  data 配置文件中对应的资源项
 * @param {String}  name 组件名称
 * @param {Number}  ids 组件序列号(可不填)
 * @param {Object}  e 上传文件的文件实体
 */</span>
 <span class="token function">uploadImage</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span>name<span class="token punctuation">,</span>ids<span class="token punctuation">,</span>e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> ext <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> extArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;jpg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>extArr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>ext<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                message<span class="token punctuation">:</span> <span class="token string">&quot;上传类型不符&quot;</span><span class="token punctuation">,</span>
                type<span class="token punctuation">:</span> <span class="token string">&quot;error&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                message<span class="token punctuation">:</span> <span class="token string">&quot;上传文件个数不符合&quot;</span><span class="token punctuation">,</span>
                type<span class="token punctuation">:</span> <span class="token string">&quot;warning&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                message<span class="token punctuation">:</span> <span class="token string">&quot;上传文件大小在1M以内&quot;</span><span class="token punctuation">,</span>
                type<span class="token punctuation">:</span> <span class="token string">&quot;warning&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$http
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>
        <span class="token string">&quot;/uploadingImage&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            image<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            render<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            headers<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;multipart/form-data&quot;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            data<span class="token punctuation">.</span>name <span class="token operator">=</span> res<span class="token punctuation">.</span>resourceName<span class="token punctuation">;</span>
            data<span class="token punctuation">.</span>height <span class="token operator">=</span> res<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
            data<span class="token punctuation">.</span>width <span class="token operator">=</span> res<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
            e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateResourceData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token operator">*</span> 上传图片文件的基本方法，此方法中可将传入图片的name判断是否添加render是否需要添加至舞台中渲染
</code></pre></div><h4 id="uploadanimation-data-name-ids-e"><a href="#uploadanimation-data-name-ids-e" aria-hidden="true" class="header-anchor">#</a> uploadAnimation( data,name, ids,e)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 方法说明
 * @method uploadAnimation
 * @for Private
 * @param {Object}  data 配置文件中对应的资源项
 * @param {String}  name 组件名称
 * @param {Number}  ids 组件序列号(可不填)
 * @param {Object}  e 上传文件的文件实体
 */</span>
 <span class="token function">uploadAnimation</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> name<span class="token punctuation">,</span> ids<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            message<span class="token punctuation">:</span> <span class="token string">'上传文件个数不符合'</span><span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">'warning'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">verifyAnimationFiles</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            message<span class="token punctuation">:</span> <span class="token string">'上传文件不符合'</span><span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">'warning'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> files <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
    files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        object<span class="token punctuation">[</span><span class="token string">'animation'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/uploadingAnimation'</span><span class="token punctuation">,</span> object<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'multipart/form-data'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        data<span class="token punctuation">.</span>name <span class="token operator">=</span> res<span class="token punctuation">.</span>resourceName<span class="token punctuation">;</span>
        e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token operator">*</span> 上传动画文件的基本方法，此方法中可将传入动画的name判断是否添加render是否需要添加至舞台中渲染<span class="token punctuation">,</span>注意需要额外附加方法verifyAnimationFiles判断当前的动画资源是否正常
</code></pre></div><h4 id="uploadsprite-data-name-e"><a href="#uploadsprite-data-name-e" aria-hidden="true" class="header-anchor">#</a> uploadSprite( data, name, e)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 方法说明
 * @method uploadSprite
 * @for Private
 * @param {Object}  data 配置文件中对应的资源项
 * @param {String}  name 配置文件中对应的资源项
 * @param {Object}  e 上传文件的文件实体
 */</span>
  <span class="token function">uploadSprite</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> name<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            message<span class="token punctuation">:</span> <span class="token string">'上传文件个数不符合'</span><span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">'warning'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">verifySpriteFiles</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            message<span class="token punctuation">:</span> <span class="token string">'上传文件不符合'</span><span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">'warning'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> files <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
    files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        object<span class="token punctuation">[</span><span class="token string">'sprite'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/uploadingSprite'</span><span class="token punctuation">,</span> object<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'multipart/form-data'</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        data<span class="token punctuation">.</span>name <span class="token operator">=</span> res<span class="token punctuation">.</span>resourceName<span class="token punctuation">;</span>
        e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token operator">*</span> 上传精灵图文件的基本方法，需额外调用verifySpriteFiles验证精灵文件的正确性
</code></pre></div><h4 id="uploadaudio-data-e"><a href="#uploadaudio-data-e" aria-hidden="true" class="header-anchor">#</a> uploadAudio( data,e)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 方法说明
 * @method uploadAudio
 * @for Private
 * @param {Object}  data 配置文件中对应的资源项
 * @param {Object}  e 上传文件的文件实体
 */</span>
  <span class="token function">uploadAudio</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span>e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ext <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> extArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'mp3'</span><span class="token punctuation">,</span><span class="token string">'wav'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>extArr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>ext<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            message<span class="token punctuation">:</span> <span class="token string">'上传类型不符'</span><span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">'error'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            message<span class="token punctuation">:</span> <span class="token string">'上传文件个数不符合'</span><span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">'warning'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/uploadingAudio'</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>audio<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'multipart/form-data'</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        data<span class="token punctuation">.</span>audio <span class="token operator">=</span> res<span class="token punctuation">.</span>resourceName
        e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token operator">*</span> 上传音频文件的基本方法
</code></pre></div><h4 id="配置文件配置数据对象"><a href="#配置文件配置数据对象" aria-hidden="true" class="header-anchor">#</a> 配置文件配置数据对象</h4> <h5 id="图片"><a href="#图片" aria-hidden="true" class="header-anchor">#</a> 图片</h5> <div class="language- extra-class"><pre class="language-text"><code>&quot;stemImg&quot;: {                          --------   配置对象
    &quot;image&quot;: {                        --------   配置类别
        &quot;x&quot;: 0,                       --------   配置属性
        &quot;y&quot;: 0,
        &quot;width&quot;: 0,
        &quot;height&quot;: 0,
        &quot;name&quot;: &quot;&quot;,
        &quot;ratio&quot;: 0,                   --------   宽高锁定比
        &quot;lock&quot;: false,                --------   宽高锁定标志
        &quot;componentName&quot;: &quot;stemImage&quot;  --------   配置组件名
    }
}
</code></pre></div><h5 id="动画"><a href="#动画" aria-hidden="true" class="header-anchor">#</a> 动画</h5> <div class="language- extra-class"><pre class="language-text"><code>&quot;stemAnimate&quot;: {                      --------   配置对象
    &quot;animate&quot;: {                      --------   配置类别
        &quot;x&quot;: 0,                       --------   配置属性
        &quot;y&quot;: 0,
        &quot;name&quot;: &quot;&quot;,
        &quot;loop&quot;: false,
        &quot;scale&quot;: 1,
        &quot;componentName&quot;: &quot;stemImage&quot;  --------   配置组件名
    }
}
</code></pre></div><h5 id="精灵"><a href="#精灵" aria-hidden="true" class="header-anchor">#</a> 精灵</h5> <div class="language- extra-class"><pre class="language-text"><code>&quot;stemSprite&quot;: {                       --------   配置对象
    &quot;sprite&quot;: {                       --------   配置类别
        &quot;x&quot;: 0,                       --------   配置属性
        &quot;y&quot;: 0,
        &quot;name&quot;: &quot;&quot;,
        &quot;loop&quot;: false,
        &quot;scale&quot;: 1,
        &quot;componentName&quot;: &quot;stemImage&quot;  --------   配置组件名
    }
}
</code></pre></div><ul><li>文件的配置中，这个配置对象很重要，配置的时候类别和对象要分开，不能直接取消配置对象这一层，否则遍历配置的时候会无法正确获取资源内容</li> <li><b>配置文件的对象组件名称很重要</b>，直接关系到舞台中的对象展示以及编辑能否成功</li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/tool/develop/part1/" class="prev">
          项目构建流程
        </a></span> <span class="next"><a href="/docs/tool/Interface/part2/">
          接口SDK
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/docs/assets/js/app.d5fef9c8.js" defer></script><script src="/docs/assets/js/41.5c9037b9.js" defer></script>
  </body>
</html>
